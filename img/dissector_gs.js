var GridsumWebDissector=GridsumWebDissector||{version:"0.6.0.7",defCallback:"_gsCallback",globalTrackers:{},isTrackerExist:function(a){return this.globalTrackers[a]!==undefined},createTracker:function(a){return this.getTracker(a)},getTracker:function(b){var a=this.globalTrackers[b]||new GridsumWebDissector.Tracker(b);this.globalTrackers[b]=a;return a},extend:function(a,c,b){var d;b=(b!==false);for(d in c){if(c.hasOwnProperty(d)){a[d]=(b||a[d]===undefined)?c[d]:a[d]}}return a},loadCallback:function(b,a,c){b=b||this.defCallback;a=a==undefined?1000:a;c=c==undefined?30:c;if(window[b]&&_gsUtility.isFunction(window[b])){window[b]();return true}else{if(c>0){setTimeout(function(){GridsumWebDissector.loadCallback(b,a,c-1)},a)}}return false}};GridsumWebDissector.Tracker=function(b){var a=this;a.serviceID=b;a.initialized=false;a.isLocal=false;a.config=new GridsumWebDissector.Config(b);a.extSrc={}};GridsumWebDissector.extend(GridsumWebDissector.Tracker.prototype,{init:function(){var c=this,b=GridsumWebDissector,a=c.config;if(c.initialized){return}c.isLocal=c.shouldIgnoreTraffic();c.browserAnalyzer=new b.BrowserAnalyzer(a);c.refererAnalyzer=new b.RefererAnalyzer(a);c.urlAnalyzer=new b.URLAnalyzer(a);c.userTracker=new b.UserTracker(a);c.ecom=new b.ECommerce(a);c.dataSender=new b.DataTransmitter(a);c.behaviorAnalyzer=new b.BehaviorAnalyzer(a);if(c.isLocal){c.browserInfo=c.urlInfo=c.refererInfo={}}else{c.browserInfo=c.browserAnalyzer.analyze();c.refererInfo=c.refererAnalyzer.analyze();c.urlInfo=c.urlAnalyzer.analyze()}if(c.isHeatmapModeOn()){c.showHeatmap()}c.initialized=true},showHeatmap:function(){var a=this.config.heatmapUrl;GridsumWebDissector.heatmapUrl=location.href;_gsUtility.domReady(function(){var b=document.createElement("script");b.src=a;document.getElementsByTagName("head")[0].appendChild(b)})},addOrder:function(c,a,b){this.ecom.addOrder(c,Number(a),b)},addProduct:function(f,b,e,c,d,a){this.ecom.addProduct(f,b,e,Number(c),Number(d),a)},trackECom:function(){var l=this;l.init();if(l.isLocal){return}var p=window.onerror;window.onerror=function(j,i,e){l.reportError("FunctionCallFailed_trackECom",{message:j,url:i,line:e});window.onerror=p;return true};try{var c,o=l.ecom.getOrders(),q=[],k=l.getCommon("ecom"),a,b,s,r=[];var t=new GridsumWebDissector.CookieSerializer(l.config),h=l.dataSender;var d=t.restore({name:"_gsecomorderid"});if(d[0].value){q=d[0].value.split(",")}for(var g=0;g<o.length;g++){b=o[g];var n=_gsUtility.encode(b.gsorderid);if(_gsUtility.indexOf(q,n)>-1){continue}q.push(n);k.gsorderid=b.gsorderid;k.gstotal=b.gstotal;k.gsquan=b.gsquan;k.gsuserid=b.gsuserid;a=b.gsproducts;for(var f=0;f<a.length;f++){s=a[f];s=_gsUtility.serialize(s,"::",",,",true,false);r.push(s)}k.gsproducts=r.join("||");if(!h.checkUrl(k,true)){for(var f=0;f<a.length;f++){s=a[f];s=_gsUtility.serialize(s,"::",",,",true,false);k.gsproducts=s;h.send(k,true)}}else{h.send(k,true)}}d[0].value=q.join(",");t.save(d);l.ecom.clearOrders()}catch(m){if("\v"=="v"){throw m}else{l.reportError("FunctionCallFailed_trackECom",m)}}window.onerror=p;l.check()},getCommon:function(d){var b=this,a=b.userTracker.getUserInfo(),c={gsver:GridsumWebDissector.version,gscmd:d,gssrvid:b.serviceID,gsuid:a.userID,gssid:a.sessionID,gsltime:_gsUtility.getLocalTime(),gstmzone:_gsUtility.getTimezone(),gsrd:_gsUtility.getRandomID()};return c},setSessionTimeout:function(a){if(a<1||a>3600){return}this.config.sessionTimeout=a},setCampaignNameKey:function(a){this.config.campNameKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campNameKey)},setCampaignMediumKey:function(a){this.config.campMediumKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campMediumKey)},setCampaignContentKey:function(a){this.config.campContentKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campContentKey)},setCampaignSourceKey:function(a){this.config.campSourceKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campSourceKey)},setCampaignTermKey:function(a){this.config.campTermKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campTermKey)},setCampaignGroupKey:function(a){this.config.campGroupKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campGroupKey)},setSEMNameKey:function(a){this.config.campNameKey=a},setSEMMediumKey:function(a){this.setCampaignMediumKey(a)},setSEMContentKey:function(a){this.setCampaignContentKey(a)},setSEMGroupKey:function(a){this.setCampaignGroupKey(a)},setSEMSourceKey:function(a){this.setCampaignSourceKey(a)},setSEMTermKey:function(a){this.setCampaignTermKey(a)},addIgnoreKeyword:function(a){this.config.ignoreKeywords.push(a)},setChannel:function(d,a,c){var e,b=this;if(a!=undefined){if(c){e=_gsUtility.getUrlParam(document.referrer,a)}else{e=_gsUtility.getUrlParam(location.href,a)}if(e!=null){d=e}}if(_gsUtility.isString(d)&&d.length!==0){b.extSrc.ad=b.extSrc.ad||{};b.extSrc.ad.channel=d;b.extSrc.channelName=d}},setIgnoreUrlParam:function(a){this.config.ignoreParams.push(a)},getUserInfo:function(){return this.userTracker.getUserInfo()},getWDCookieString:function(a){this.init();return this.userTracker.getRawCookieString(a)},setIgnoreTrafficKeyword:function(a){this.config.ignoreTrafficKeyword=a},shouldIgnoreTraffic:function(){var a=this.config.ignoreTrafficKeyword;return !this.serviceID||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||this.isHeatmapModeOn()||(a&&_gsUtility.getUA().indexOf(a.toLowerCase())>-1)},isHeatmapModeOn:function(){var b=this.config;var a=location.hash.toLowerCase();return b.clickEventGathering&&a.indexOf(b.heatmapKeyword)>-1&&a.indexOf(this.serviceID.substring(4))>-1},reportError:function(i,j){j=j||{};var c=new Date().getTime();var g=Math.round(Math.random()*2147483647);var f=_gsUtility.encode(_gsUtility.encode([location.protocol,"//",location.host,location.pathname,location.search].join("")));var h=_gsUtility.encode(_gsUtility.encode(document.referrer));var b=_gsUtility.encode(_gsUtility.encode(_gsUtility.getUA()));var e=_gsUtility.encode(GridsumWebDissector.version);var a=_gsUtility.format(this.config.errorUrl,this.serviceID,i,_gsUtility.encode(_gsUtility.serialize(j,"::"," || ",true,true)),f,g,c,Math.random(),h,e,b);var d=new Image(1,1);d.onload=function(){_gsUtility.emptyFunction()};d.src=a},addOrganicSearch:function(d,f,b,h,a,e,g,c){this.config.searchEngines.push(new GridsumWebDissector.SearchEngine(d,f,b,h,a,e,g,c))},setCustomProperty:function(f,h,g,j){var i,e=this,c,b,d,a=e.extSrc.customProperties||{};h=(h===undefined)?null:h;i=h;if(g==="cookie"){d=_gsUtility.getCookie(j,h);if(d!==null){i=d}}else{if(g==="query"){d=_gsUtility.getUrlParam(location.href,j);if(d!==null){i=d}}}if(i!=null){a[f]=i;e.extSrc.customProperties=a}},setHeatmapScriptUrl:function(a){this.config.heatmapUrl=a},setPageName:function(a){this.extSrc.pageName=a},setSamplingRate:function(a){this.config.samplingRate=a},setServiceUrl:function(a){this.config.serviceUrl=a},track:function(c,a){var C,r,q,z,d,f,s,p,b,o,j=this,A=j.config,t=j.extSrc.pageVer,B=window.onerror;window.onerror=function(D,i,e){j.reportError("FunctionCallFailed_track",{message:D,url:i,line:e});window.onerror=B;return true};try{j.init();if(j.isLocal){window.onerror=B;return}d=j.userTracker;s=j.browserInfo;p=j.refererInfo;if(c){c=c.toLowerCase();if(c.substring(0,4)!=="http"){c=[location.protocol,"//",location.host,c].join("")}o=j.urlInfo;b=j.urlAnalyzer.analyze(c)}else{b=j.urlAnalyzer.analyze()}a=(a===true);if(!d.isSampled()){return}if(!a){d.updateCounter(p.type)}else{d.updateCounter("referral")}f=d.getUserInfo();C=j.getCommon("pv");C.gsiscnew=f.isFirstVisit?1:0;C.gsissecpv=(f.sessionPV===2)?1:0;C.gsdcnt=f.directCount;C.gsrcnt=f.referralCount;C.gsocnt=f.organicCount;C.gsbrname=s.browserName;C.gstl=j.extSrc.pageName||s.title;C.gsflver=s.flashVer;C.gsalexaver=s.alexaVer;C.gsdotnetver=s.dotnetVer;C.gssil=s.silverlightVer;C.gsbrlang=s.browserLang;C.gsscr=s.resolution;C.gsclr=s.colorDepth;C.gsoslang=s.osLang;C.gsosname=s.osName;C.gsje=s.javaEnabled;C.gsce=s.cookieEnabled;C.gsim=s.isMobile;C.gspro=b.protocol;C.gsdm=b.host;C.gspa=b.path;q=j.extSrc.customProperties;if(q){C.gscp=_gsUtility.serialize(q,"::","||",false,true)}C.gschan=j.extSrc.channelName||(p.searchEngineName||p.domain);C.gsorurl=b.pureUrl;if(!a){if(t){C.gspver=t}C.gsreftype=p.type||"";C.gsrefdm=p.domain;C.gsrefpa=p.path||"";C.gssename=p.searchEngineName||"";C.gskwd=p.keyword;C.gsenc=p.encoding;C.gssepage=p.pageIndex;z=b.ad;if(z){C.gsispaid=1;C.gscamp=z.campName;C.gsgroup=z.campGroup;C.gscampsrc=z.campSource;C.gsmedium=z.campMedium;C.gscampkwd=z.campKeyword;C.gscampcontent=z.campContent;if(j.refererInfo.isSearchEngine){C.gsreftype="paid search"}if(z.channel){C.gschan=z.channel}var y=j.config.searchNetworks,m=j.config.contentNetworkKey,l=j.config.searchNetworkKey,h=false;if(!document.referrer){C.gsrefdm="(lost)";C.gsrefpa="(lost)";C.gsreftype="referral"}if(z.campMedium){if(z.campMedium.indexOf(m)>-1){C.gsreftype="content network";C.gssename="";C.gsenc="";C.gskwd="";C.gssepage="";h=true}else{if(z.campMedium.indexOf(l)>-1){C.gsreftype="paid search";h=true}}}if(!h){if(z.campSource){var w;for(var u=0,v=y.length;u<v;u++){if(y[u].name===z.campSource){w=y[u];if(document.referrer){var g=w.match(document.referrer);if(g.status){C.gskwd=g.keyword;C.gsrefdm=g.domain;C.gsreftype="paid search";C.gssename=w.name;C.gsenc=g.encoding;C.gssepage=g.pageIndex;h=true;break}}}}if(w&&!h){C.gsreftype="content network"}}}}}else{C.gsreftype="referral";C.gsrefdm=o.host;C.gsrefpa=o.path||""}j.dataSender.send(C,true);if(j.rsDomain&&f.sessionPV===1&&(!document.referrer||document.referrer.indexOf(j.rsDomain)>-1)){var n=C;n.gscmd="rpv";var k=[A.redirectServer,_gsUtility.getHashCode(j.rsDomain),A.redirectServerPath].join("");j.dataSender.send(n,true,k)}j.check()}catch(x){if("\v"=="v"){throw x}else{j.reportError("FunctionCallFailed_track",x);window.onerror=B}}window.onerror=B},trackEvent:function(c,a,b){return _gsUtility.observe(c,a,b)},trackLink:function(e,c,b,a,g){var d=this;a=a||{};g=(g!==false);var f=d.trackEvent(c,"click",function(k){var j,h,i=k.target;if(!b){d.track(e,true)}else{if(i){while(g&&i&&i!=f.parentNode){h=true;if(i.tagName===b.toUpperCase()){h=false;for(j in a){if(a.hasOwnProperty(j)&&(!i[j]||i[j].toString().toUpperCase().indexOf(a[j].toString().toUpperCase())<0)){h=true;break}}}if(h){i=i.parentNode}else{d.track(e,true);return}}}}});if(!f&&c){this.reportError("ElementBindingFailed",{element:c.id||c,path:e})}return f},jump:function(b){this.init();var c,a=this.userTracker.getRawCookieString();c=_gsUtility.isString(b)?b:b.action;location.href=c+"#"+a},setCookieProperties:function(b,c,a){if(b&&b.charAt(0)==="."){b=b.substring(1)}this.config.domain=b||this.config.domain;this.config.cookiePath=c||this.config.cookiePath;this.config.cookieSecure=!!a},addAdNetwork:function(d,f,b,h,a,e,g,c){this.config.searchNetworks.push(new GridsumWebDissector.SearchEngine(d,f,b,h,a,e,g,c))},clearAdNetworks:function(){this.config.searchNetworks=[]},setCampaign:function(a){if(_gsUtility.isString(a)&&a.length!==0){this.extSrc.ad=this.extSrc.ad||{};this.extSrc.ad.campName=a}},setGroup:function(a){if(_gsUtility.isString(a)&&a.length!==0){this.extSrc.ad=this.extSrc.ad||{};this.extSrc.ad.campGroup=a}},setAdGroup:function(a){this.setGroup(a)},setContent:function(a){if(_gsUtility.isString(a)&&a.length!==0){this.extSrc.ad=this.extSrc.ad||{};this.extSrc.ad.campContent=a}},setKeyword:function(a){if(_gsUtility.isString(a)&&a.length!==0){this.extSrc.ad=this.extSrc.ad||{};this.extSrc.ad.campKeyword=a}},setMedium:function(a){if(_gsUtility.isString(a)&&a.length!==0){this.extSrc.ad=this.extSrc.ad||{};this.extSrc.ad.campMedium=a}},setSource:function(a){if(_gsUtility.isString(a)&&a.length!==0){this.extSrc.ad=this.extSrc.ad||{};this.extSrc.ad.campSource=a}},setCampaignKey:function(a){this.config.campNameKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campNameKey)},setMediumKey:function(a){this.config.campMediumKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campMediumKey)},setContentKey:function(a){this.config.campContentKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campContentKey)},setSourceKey:function(a){this.config.campSourceKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campSourceKey)},setKeywordKey:function(a){this.config.campTermKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campTermKey)},setGroupKey:function(a){this.config.campGroupKey=a.toLowerCase();this.config.ignoreParams.push(this.config.campGroupKey)},setChannelKey:function(a){this.config.channelKey=a.toLowerCase();this.config.ignoreParams.push(this.config.channelKey)},setContentNetworkPrefix:function(a){this.config.contentNetworkKey=a},setSearchNetworkPrefix:function(a){this.config.searchNetworkKey=a},addFrames:function(){for(var c=0,a=arguments.length;c<a;c++){var b=_gsUtility.getEl(arguments[c]);try{b=b.frameElement||b;if(b.contentDocument){this.config.iframes.push(b)}}catch(d){}}},addIgnoreParams:function(){this.config.ignoreParams=this.config.ignoreParams.concat(Array.prototype.slice.apply(arguments))},addToBlackList:function(){for(var b=0,a=arguments.length;b<a;b++){this.config.mcBlackList.push(arguments[b])}},addToWhiteList:function(){for(var b=0,a=arguments.length;b<a;b++){this.config.mcWhiteList.push(arguments[b])}},clearBlackList:function(){this.config.mcBlackList=[]},enableLazyClickTrace:function(a){this.config.lazyClickTrace=(a!==false)},enableHeatmap:function(a){this.config.clickEventGathering=(a!==false)},enableCrossDomain:function(a){this.config.isCrossDomainEnabled=(a!==false)},enableAnchor:function(a){this.config.allowAnchor=(a!==false)},keepAnchor:function(a){this.config.keepAnchor=(a!==false)},setClickSamplingRate:function(a){this.config.mcSamplingRate=a},setClickZone:function(b,a){this.config.clickZoneWidth=b||this.config.clickZoneWidth;this.config.clickZoneHeight=a||this.config.clickZoneHeight},setDocWidth:function(a){this.config.documentWidth=Number(a)},setOriginalUrl:function(a){this.extSrc.pureUrl=a},setOriginElement:function(a){this.config.coordinateElement=_gsUtility.getEl(a)},setPageVersion:function(a){this.extSrc.pageVer=a},enableRedirectServer:function(a){this.rsDomain=a||this.config.domain},check:function(){try{var a=_gsUtility.getCookie("_gsHijack");if(a){return}if(top!=window&&top.location.href===window.location.href){this.reportError("WebPageHijack");_gsUtility.setCookie("_gsHijack",1)}}catch(b){}},trackSiteSearch:function(h,b,c,k,j){var g=this;try{g.init();if(g.isLocal){return}var f=g.getCommon("ss"),d=_gsUtility.getRandomID();f.gsssid=g.config.lastSearchID=d;if(k){f.gsskwd=_gsUtility.getUrlParam(location.href,h,true,false);f.gssenc=c||"utf-8";f.gsscat=_gsUtility.getUrlParam(location.href,b,true,false)}else{if(c){f.gsskwd=h;f.gsscat=b;f.gssenc=c}else{f.gsskwd=_gsUtility.encode(h);f.gsscat=_gsUtility.encode(b);f.gssenc="utf-8"}}j=j||document.referrer;if(j){var a=_gsUtility.resolveURL(j);f.gssrefpa=a.fullPath;f.gssrefdm=a.host}g.dataSender.send(f)}catch(i){g.reportError("FunctionCallFailed_trackSiteSearch",i)}},trackClickthrough:function(h,a){var b=this;try{b.init();if(b.isLocal){return}var d=b.getCommon("ct"),g=b.config.lastSearchID;if(g){d.gsssid=g;var c=_gsUtility.resolveURL(a);d.gsclkdm=c.host;d.gsclkpa=c.fullPath;d.gsclktl=h;d.gsclkpro=c.protocol;b.dataSender.send(d)}}catch(f){b.reportError("FunctionCallFailed_trackSiteSearch",f)}},bindSearchResults:function(a,b){var c=this;var d=_gsUtility.observe(a,"click",function(i){var h,f,g=i.target;if(g){while(g&&g!=d.parentNode){f=true;if(g.tagName==="A"){f=false;for(h in b){if(b.hasOwnProperty(h)&&(!g[h]||g[h].toString().toUpperCase().indexOf(b[h].toString().toUpperCase())<0)){f=true;break}}}if(f){g=g.parentNode}else{c.trackClickthrough(_gsUtility.getInnerText(g),g.href);return}}}})}});GridsumWebDissector.Utility=function(){this.ignoreCase=true;this.getBrowserName();this.funcList=[]};GridsumWebDissector.extend(GridsumWebDissector.Utility.prototype,{isIE:function(){return"\v"=="v"},getHashCode:function(e,a){var d=1315423911,b,c;if(!a){e=e.toLowerCase()}for(b=e.length-1;b>=0;b--){c=e.charCodeAt(b);d^=((d<<5)+c+(d>>2))}return(d&2147483647)},getRandomString:function(f,g){var h=-1,e=-1,d="abcdefghijklmnopqrstuvwxyz0123456789",b=[],a=d.length-1;g=(g!==false);for(var c=0;c<f;c++){do{e=Math.round(Math.random()*a)}while(g&&h===e);h=e;b.push(d.charAt(e))}return b.join("")},getRandomID:function(){var b=new Date().getTime().toString();var c=""+Math.abs(this.getHashCode(location.href+document.referrer+this.getUA()));var a=c.length>2?2:c.length;c=c.substr(0,a);return b.substr(2,b.length-3)+this.getRandomString(6)+c},getUrlParam:function(b,c,a,f){if(!c){return null}var e,d=this;f=(f!==false);a=(a!==false);e=d.find(b,"&"+c+"=","&",a);if(e===null){e=d.find(b,"?"+c+"=","&",a);if(e===null){e=d.find(b,c+"=","&",a)}}if(e!=null){e=e.toLowerCase()}if(f){return d.decode(e)}else{return e}},find:function(i,f,l,h,c,a,d){var b,k,n,m,e,g,m,j=null;h=(h!==false);c=(c!==false);d=d||i.length;m=i=i.substring(a,d);f=f||"";if(h){m=i.toLowerCase();f=f.toLowerCase();l=l&&l.toLowerCase()}b=m.indexOf(f);if(b>-1){n=b+f.length;if(!l){j=i.substring(n)}else{k=m.indexOf(l,n);j=k>-1?i.substring(n,k):i.substring(n)}}if(j&&c){j=this.trim(j)}return j},findArray:function(f,d,j,e,c){var b,i,l,k,g,h=[],a=0;e=(e!==false);c=(c!==false);if(e){f=f.toLowerCase();d=d.toLowerCase();j=j&&j.toLowerCase()}while(a>-1){b=f.indexOf(d,a);if(b<0){break}else{l=b+d.length;if(!j||(i=f.indexOf(j,l))<0){g=f.substring(l);a=-1}else{g=f.substring(l,i);a=i+j.length}if(c){g=this.trim(g)}h.push(g)}}return h},indexOf:function(b,c,d){var a=b.length;d=d||0;if(a===0){return -1}while(d<0){d+=a}if(this.isArray(b)){for(;d<a;d++){if(b[d]===c){return d}}}else{if(this.isString(b)){return b.indexOf(c,d)}}return -1},getTimezone:function(){return Math.round(new Date().getTimezoneOffset()/-60).toString()},getLocalTime:function(){var a=new Date().getTime();var b=this.getTimezone();return a+b*3600*1000},isArray:function(a){return !!(a&&a.constructor==Array)},isString:function(a){return typeof a=="string"},isNumber:function(c){var a=typeof c;if(a=="number"){return true}else{if(a=="string"){var b=/^([\+\-]?\d+\.?\d*)$/;return b.test(c)}}return false},isNumberValid:function(c,b,a){a=a||Number.MAX_VALUE;return c>=b&&c<=a},isFunction:function(a){return typeof a=="function"},isPageMatch:function(f,d,e){e=e||location.pathname;d=d.toLowerCase();e=e.toLowerCase();if(!_gsUtility.isArray(f)){f=[f]}for(var c=0,a=f.length;c<a;c++){var b=f[c];if(b.toLowerCase){b=b.toLowerCase()}switch(d){case"contains":if(e.indexOf(b)>-1){return true}break;case"startswith":if(e.indexOf(b)===0){return true}break;case"endswith":if((e.indexOf(b)+b.length)===e.length){return true}break;case"exactmatch":if(e==b){return true}break;case"regex":if(b.test&&b.test(e)){return true}break;default:return false}}return false},getCookie:function(a,e){var c={},d,b=this;if(!a){return null}c=b.toDict(document.cookie,"=",";",true);a=a.toLowerCase();for(var f in c){if(c.hasOwnProperty(f)&&f.toLowerCase()===a){return unescape(c[f])}}return e!==undefined?e:null},setCookie:function(b,d,a,f,c,e){if(!b){return}b=b.toLowerCase();b=b+"="+escape(d)+";";a=a?("expires="+this.getExpireDate(a).toGMTString())+";":"";f=!!f?"path="+f+";":"path=/;";c=c?("domain="+c)+";":"";e=e?"secure=true;":"";document.cookie=[b,a,f,c,e].join("")},delCookie:function(a,c,b){a=a.toLowerCase();this.setCookie(a,"",-1000,c,b)},getExpireDate:function(a){return new Date(new Date().getTime()+a*1000)},getDate:function(a){return new Date(a-this.getTimezone()*3600*1000)},trim:function(a){return a&&a.replace(/^\s*(.*?)\s*$/,"$1")},isBlank:function(a){return this.trim(a).length===0},toJSON:function(d,c,b,a){return this.toDict(d,c,b,a)},toDict:function(l,b,c,m){var g,f,e,k,d,h={},j=this;b=b||"=";c=c||"&";m=(m===true);e=l.split(c);if(m){d=j.trim}else{d=j.emptyFunction}for(g=0,k=e.length;g<k;g++){var n=_gsUtility.find(e[g],null,b);var a=_gsUtility.find(e[g],b,null);h[d(n)]=(a===undefined?null:d(a))}return h},resolveURL:function(c){var d=/(\w+):\/\/([^\/#?]*)(\/[^?#&]*)?\??([^#]*)#?(.*)/,a={path:"",fullPath:"",query:"",anchor:"",params:{}};var b=c.match(d);if(b){a.protocol=b[1];a.isLocal=(b[1]==="file");a.host=b[2]||"";a.path=b[3]||"/";a.fullPath=b[3]||"/";a.query=b[4]||"";a.anchor=b[5]||"";if(b[4]){a.fullPath+="?"+b[4];a.params=_gsUtility.toDict(a.query)}}else{a.isLocal=true;a.protocol="file";a.fullPath=a.path="/"+c.replace(/\\/g,"/")}var e=a.query;if(e){e="?"+e}a.url=[a.protocol,"://",a.host,a.fullPath,e].join("");return a},encode:function(e,b){var c=this,d=e,a=c.emptyFunction;b=b||true;if(c.isString(e)){if(b){a=encodeURIComponent||escape}else{a=encodeURI||escape}d=a(e)}return d},decode:function(g,a){var b=this,c=g,f=this.emptyFunction;a=a||true;if(b.isString(g)){g=g.replace(/\+/ig,"%20");if(a){f=decodeURIComponent||unescape}else{f=decodeURI||unescape}try{c=f(g)}catch(d){}}return c},getAlexaVer:function(){return this.getUA().indexOf("alexa")>-1?1:0},getSilverlightVer:function(){var d,b,c,g,a=null;try{if(window.ActiveXObject){g=new ActiveXObject("AgControl.AgControl");for(d=10;d>0;d--){if(g.IsVersionSupported(""+d+".0")){a=""+d+".0";break}}}else{c=navigator.plugins;for(d=0,b=c.length;d<b;d++){if(c[d].name&&c[d].name.toLowerCase().indexOf("silverlight")>-1){a=c[d].description;return a.toLowerCase()}}}}catch(f){}return a},getOsLang:function(){return"zh-cn"},getDotNetVer:function(){var e,b,d=this.getUA(),c=this.findArray(d,".net clr",";",true,true),a=c.length;if(a!==0){b=c[0];for(e=1;e<a;e++){if(c[e]>b){b=c[e]}}e=b.indexOf(")");if(e>-1){b=b.substring(0,e)}}return b},getBrowserName:function(){var b={opera:"Opera","msie 8":"IE8","msie 7":"IE7","msie 6":"IE6",msie:"IE",chrome:"Chrome",safari:"Safari",mozilla:"Firefox"};var a={maxthon:"Maxthon","360se":"360",theworld:"TheWorld",se:"Sogou",avant:"Avant",tencenttraveler:"Tencent",greenbrowser:"GreenBrowser"};var d=this.getUA();var e=navigator.appName&&navigator.appName.toLowerCase();for(var c in b){if(d.indexOf(c)>-1){e=b[c];break}}if(e==="IE7"&&document.documentMode){e="IE8 CompatMode"}if(e==="microsoft internet explorer"){e="IE"}if(e.toLowerCase().indexOf("ie")>-1){for(var c in a){if(d.indexOf(c)>-1){e=a[c]+" / "+e;break}}}return e},getFlashVer:function(){var f="",n=navigator,ii;if(n.plugins&&n.plugins.length){for(ii=0;ii<n.plugins.length;ii++){if(n.plugins[ii].name.indexOf("Shockwave Flash")!=-1){f=n.plugins[ii].description.split("Shockwave Flash ")[1];break}}}else{if(window.ActiveXObject){for(ii=10;ii>=2;ii--){try{var fl=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+ii+"');");if(fl){f=ii+".0";break}}catch(e){}}}}if(f){f=f.replace("  "," ")}return f},getOSName:function(){var b=navigator.platform,f,a=0,c={"windows nt 6.1":"windows 7","windows nt 6.0":"windows vista/2008","windows nt 5.2":"windows 2003","windows nt 5.1":"windows xp","windows nt 5.01":"windows 2000 sp1","windows nt 5.0":"windows 2000",linux:"linux",macintosh:"mac","mac os x":"mac","windows 4.0":"windows 95","windows 98":"windows 98","windows nt 4.0":"windows nt 4.0"},e={android:"android",ipad:"ipad",blackberry:"blackberry","iphone os 3":"iphone 3.0","iphone os 4":"iphone 4.0","iphone os 3_1":"ipod touch","windows ce":"windows mobile","windows phone os 7.0":"windows phone 7",symbian:"symbian",palm:"palm"},d=this.getUA();for(f in e){if(e.hasOwnProperty(f)&&d.indexOf(f)>-1){a=1;b=e[f];break}}if(!a){for(f in c){if(d.indexOf(f)>-1){b=c[f]}}}return{platform:b&&b.toLowerCase(),isMobile:a}},isInvalid:function(a){return a===undefined||a===null||a===""},serialize:function(f,b,c,i,j){var d=[],g,h=this;b=b||"=";c=c||"&";if(j===false){g=h.emptyFunction}else{g=h.encode}for(var a in f){if(f.hasOwnProperty(a)){if(i&&h.isInvalid(f[a])){continue}var e=a+b+g.call(h,f[a],true);d.push(e)}}return d.join(c)},getEl:function(a){return this.isString(a)?document.getElementById(a):a},waitFor:function(e,b,a,c){a=a==undefined?1000:a;c=c==undefined?30:c;var d=setInterval(function(){if(_gsUtility.getEl(e)){clearInterval(d);b()}else{if(c>0){c-=1}else{clearInterval(d)}}},a)},getUA:function(){return navigator.userAgent.toLowerCase()},getElementPos:function(c){var b,e,g,l=null,j=[],h=this,a=h.getUA(),d=h.isIE(),k={};if(c.parentNode===null||c.style.display=="none"){return false}if(c.getBoundingClientRect){g=c.getBoundingClientRect();b=Math.max(document.documentElement.scrollTop,document.body.scrollTop);e=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);if(document.compatMode=="BackCompat"&&d){k={x:g.left,y:g.top}}else{k={x:g.left+e,y:g.top+b}}return k}else{if(document.getBoxObjectFor){g=document.getBoxObjectFor(c);var i=(c.style.borderLeftWidth)?parseInt(c.style.borderLeftWidth,10):0;var f=(c.style.borderTopWidth)?parseInt(c.style.borderTopWidth,10):0;j=[g.x-i,g.y-f]}else{j=[c.offsetLeft,c.offsetTop];l=c.offsetParent;if(l!=c){while(l){j[0]+=l.offsetLeft;j[1]+=l.offsetTop;l=l.offsetParent}}if(a.indexOf("opera")!=-1||(a.indexOf("safari")!=-1&&c.style.position=="absolute")){j[0]-=document.body.offsetLeft;j[1]-=document.body.offsetTop}}}if(c.parentNode){l=c.parentNode}else{l=null}while(l&&l.tagName!="BODY"&&l.tagName!="HTML"){j[0]-=l.scrollLeft;j[1]-=l.scrollTop;if(l.parentNode){l=l.parentNode}else{l=null}}k={x:j[0],y:j[1]};return k},getViewportHeight:function(){return window.innerHeight||(document.documentElement&&document.documentElement.clientHeight)||(document.body&&document.body.clientHeight)||0},getViewportWidth:function(){return window.innerWidth||(document.documentElement&&document.documentElement.clientWidth)||(document.body&&document.body.clientWidth)||0},getDocWidth:function(){return(document.documentElement&&document.documentElement.scrollWidth)||(document.body&&document.body.scrollWidth)||0},getDocHeight:function(){return(document.documentElement&&document.documentElement.scrollHeight)||(document.body&&document.body.scrollHeight)||0},getHScroll:function(){return window.pageXOffset||(document.documentElement&&document.documentElement.scrollLeft)||(document.body&&document.body.scrollLeft)||0},getVScroll:function(){return window.pageYOffset||(document.documentElement&&document.documentElement.scrollTop)||(document.body&&document.body.scrollTop)||0},observe:function(b,a,c){b=this.getEl(b);if(!b){return null}function d(f){if(!f){f=window.event;f.currentTarget=this}if(!f.target&&f.srcElement){f.target=f.srcElement}if(f.target&&f.target.nodeType===3){f.target=f.target.parentNode}c(f||{})}if(b.addEventListener){b.addEventListener(a,d,false)}else{b.attachEvent("on"+a,d)}return b},onUrlChanged:function(c,b){b=Number(b||1000);var d=this;var a=d.urlHandlers||[];a.push(c);if(!d.urlTimer){d.urlTimer=window.setInterval(function(){var j=location.href;if(d.lastUrl&&j!==d.lastUrl){for(var g=0,f=a.length;g<f;g++){try{a[g](d.lastUrl,j)}catch(h){}}}d.lastUrl=j},b)}},prepareDomReadyEvent:function(){var b=this;if(b.prepared){return}b.prepared=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);b.domLoaded()},false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);b.domLoaded()}});var a=false;if(document.documentElement.doScroll&&window==window.top){(function(){if(a){return}try{document.documentElement.doScroll("left")}catch(c){setTimeout(arguments.callee,0);return}b.domLoaded()})()}}}b.observe(document,"load",b.domLoaded)},domReady:function(a){this.prepareDomReadyEvent();if(this.domLoaded){a.call(window)}else{this.funcList.push(a)}},domLoaded:function(){if(!this.domLoaded){this.domLoaded=true;if(this.isArray(this.funcList)){for(var b=0,a=this.funcList.length;b<a;b++){this.funcList[b].call(window)}}}},format:function(a){if(!arguments.length===1){return a}else{var c=arguments.length;for(var b=1;b<c;b++){a=a.replace(new RegExp("\\{"+(b-1)+"\\}","g"),arguments[b])}return a}},getInnerText:function(a){a=_gsUtility.getEl(a);if(a){return a.innerHTML.replace(/<[^>]+>/ig,"")}return null},onError:function(){},emptyFunction:function(a){return a}});var _gsUtility=new GridsumWebDissector.Utility();if(!window._Utility){var _Utility=_gsUtility}GridsumWebDissector.BrowserAnalyzer=function(a){this.config=a};GridsumWebDissector.extend(GridsumWebDissector.BrowserAnalyzer.prototype,{analyze:function(){var c={},e=_gsUtility.getUA(),b=_gsUtility.isIE()?navigator.browserLanguage:navigator.language;var a=GridsumWebDissector.getTracker(this.config.serviceID).extSrc.pageName,f=_gsUtility.getOSName();c.flashVer=_gsUtility.getFlashVer();c.silverlightVer=_gsUtility.getSilverlightVer();c.alexaVer=_gsUtility.getAlexaVer();c.resolution=screen.width+"*"+screen.height;c.colorDepth=screen.colorDepth||32;c.osLang=navigator.systemLanguage&&navigator.systemLanguage.toLowerCase();c.javaEnabled=navigator.javaEnabled()?1:0;c.dotnetVer=_gsUtility.getDotNetVer();c.title=a||document.title;c.browserName=_gsUtility.getBrowserName();c.osName=f.platform;c.isMobile=f.isMobile;c.browserLang=b?b.toLowerCase():null;var d=new GridsumWebDissector.CookieSerializer(this.config).getCookieSupportDegree();c.cookieEnabled=(d>0)?1:0;return c}});GridsumWebDissector.SourceRecognizer=function(a,b,e,d,f){var c=this;c.name=a;c.type=b;c.domainPattern=e;c.essentialParams=d||[];c.optParams=f||[]};GridsumWebDissector.extend(GridsumWebDissector.SourceRecognizer.prototype,{testDomain:function(b){var a=this.domainPattern;if(_gsUtility.isString(a)){return b.indexOf(a)>-1}else{return a.test(b)}},match:function(b){var l,n,s,a,d,r,j,p,f,c=0,e=this,q={},g=_gsUtility.resolveURL(b.toLowerCase()),k=true,o={},m=e.essentialParams,h=e.optParams;if(g.isLocal){k=false}else{s=g.host;k=e.testDomain(s);if(k){p=g.params;for(l=0,n=m.length;l<n;l++){f=m[l].split("=");r=f[0];if(!p[r]||(f[1]!==undefined&&p[r]!=f[1])){k=false;break}else{o[r]=p[r];c++}}if(k){for(l=0,n=h.length;l<n;l++){f=h[l].split("=");r=f[0];if(p[r]){o[r]=p[r];c++}}}}}q.status=k;q.domain=s;q.type=e.type;o.length=c;q.params=o;return q}});GridsumWebDissector.RefererAnalyzer=function(a){this.config=a};GridsumWebDissector.extend(GridsumWebDissector.RefererAnalyzer.prototype,{analyze:function(n){var h,g,k,m,d,j=this,c=j.config,o=GridsumWebDissector.getTracker(c.serviceID),b={},a=false,f=c.searchEngines;if(!n){try{n=window.top.document.referrer}catch(l){n=document.referrer}}if(!n){try{if(window.opener){n=window.opener.location.href;if(!n){a=true}}else{a=true}}catch(l){a=true}}if(a){b.isDirect=true;b.type="direct"}else{d=_gsUtility.resolveURL(n);b.original=n;b.domain=d.host.toLowerCase();b.path=d.fullPath;if(!d.isLocal){for(g=0,k=f.length;g<k;g++){h=f[g].match(n);if(h.status){b.keyword=h.keyword;b.domain=h.domain;b.type="organic search";b.isSearchEngine=true;b.searchEngineName=f[g].name;b.encoding=h.encoding;b.pageIndex=h.pageIndex;a=true;break}}}if(!a){if(b.path){b.type="referral";b.isReferral=true}else{b.isDirect=true;b.type="direct";o.reportError("UnRecognizableReferrer",{refer:n})}}}if(!b.type){o.reportError("UnRecognizableReferrer",{refer:n})}return b}});GridsumWebDissector.SearchEngine=function(a,d,g,e,i,b,f,c){var h=this;h.name=a;h.domain=d;h.termKey=g;h.start=b||"";h.num=f||"";h.pagingType=c||"item";h.encodingKey=e||"ie";h.defEncoding=i||"utf-8";h.sourceRecognizer=new GridsumWebDissector.SourceRecognizer(a,"organic search",d,[h.termKey],[h.start,h.num,h.encodingKey])};GridsumWebDissector.SearchEngine.prototype.match=function(a){var g,i,c,h=this,f=h.sourceRecognizer.match(a),b={status:f.status,name:h.name,domain:f.domain},e=f.params;if(f.status){c=Number(e[h.start]);g=Number(e[h.num]);c=(isNaN(c)?1:c);g=(isNaN(g)?10:g);if(h.pagingType==="item"){i=Math.round(c/g)+1}else{i=c}b.pageIndex=i;b.keyword=e[h.termKey]||"";b.encoding=e[h.encodingKey]||h.defEncoding;if(!e[h.encodingKey]){try{decodeURIComponent(b.keyword);b.encoding="utf-8"}catch(d){}}if(b.encoding==="utf8"){b.encoding="utf-8"}}return b};GridsumWebDissector.URLAnalyzer=function(a){this.config=a};GridsumWebDissector.extend(GridsumWebDissector.URLAnalyzer.prototype,{analyze:function(g){var u,s,f,t,r,l,x,w,j,y=this.config,m=y.allowAnchor,k=y.keepAnchor,n=y.ignoreParams,o=y.campNameKey.toLowerCase(),z=y.campTermKey.toLowerCase(),v=y.campSourceKey.toLowerCase(),d=y.campMediumKey.toLowerCase(),b=y.campContentKey.toLowerCase(),c=y.campGroupKey.toLowerCase(),p=y.channelKey.toLowerCase(),h=GridsumWebDissector.getTracker(y.serviceID),e=h.extSrc.ad,a=h.extSrc.pureUrl;g=g||window.location.href;t=_gsUtility.resolveURL(g);if(k){t.fullPath+=("#"+t.anchor)}f={protocol:t.protocol,isLocal:t.isLocal,host:t.host,path:t.fullPath,anchor:t.anchor,params:t.params,pureUrl:[t.protocol,"://",t.host,t.fullPath].join("")};if(!f.isLocal){if(a){f.pureUrl=a}else{if(n.length!==0&&t.params){for(u=0;u<n.length;u++){delete t.params[n[u]]}s=_gsUtility.serialize(t.params,"=","&",false,false);if(s){s="?"+s}if(k){s+=("#"+t.anchor)}f.pureUrl=[t.protocol,"://",t.host,t.path,s].join("")}}r=new GridsumWebDissector.SourceRecognizer("current url","referral",t.host,[],[o,z,v,d,b,c,p]);j=window.location.href.toLowerCase();j=m?j.replace(/#/g,"&"):j;j=j.replace(/\?/g,"&");l=r.match(j);if(l.status){x=l.params;if(x.length!==0){w={campName:x[o],campGroup:x[c],campSource:x[v],campMedium:x[d],campKeyword:x[z],campContent:x[b],channel:x[p]}}}if(e){w=w||{};w.campName=e.campName||w.campName;w.campGroup=e.campGroup||w.campGroup;w.campMedium=e.campMedium||w.campMedium;w.campSource=e.campSource||w.campSource;w.campKeyword=e.campKeyword||w.campKeyword;w.campContent=e.campContent||w.campContent;w.channel=e.channel||w.channel}if(w){w.campName=_gsUtility.decode(w.campName);w.campGroup=_gsUtility.decode(w.campGroup);w.campMedium=_gsUtility.decode(w.campMedium);w.campSource=_gsUtility.decode(w.campSource);w.campKeyword=_gsUtility.decode(w.campKeyword);w.campContent=_gsUtility.decode(w.campContent);w.channel=_gsUtility.decode(w.channel)}f.ad=w}return f}});GridsumWebDissector.UserTracker=function(a){this.config=a;this.cookieSerializer=new GridsumWebDissector.CookieSerializer(a);this.userInfo={};this.init()};GridsumWebDissector.extend(GridsumWebDissector.UserTracker.prototype,{init:function(){var o,q,d,g,t,p,i,h,l,m=this,r=false,u=m.config,j=GridsumWebDissector.getTracker(u.serviceID),a=u.isCrossDomainEnabled,c=m.cookieSerializer,n=[],k=true,b=true,f=[{name:"_gscu"},{name:"_gscs"},{name:"_gscbrs"}];if(j.isLocal){return}try{if(a){o=document.location.href.toLowerCase();q=_gsUtility.resolveURL(o);l=q.anchor.replace("#","&");f=c.restoreFrom(l,f,"&");d=f[0];r=!!d.value}if(!r){f=m.cookieSerializer.restore(f)}d=f[0].value;g=f[1].value;t=f[2].value;if(d){n=d.split("|");if(n.length===7){i=n[0];r=true;if(i!==GridsumWebDissector.version){h=GridsumWebDissector.version.split(".");if(!(i.indexOf(h[0])===0||Number(h[0])%2===0)){r=false}}if(r){m.userInfo.userID=n[1];m.userInfo.firstVisitTime=n[2];m.userInfo.timezone=n[3];m.userInfo.directCount=Number(n[4]);m.userInfo.referralCount=Number(n[5]);m.userInfo.organicCount=Number(n[6]);b=false;if(g&&t){n=g.split("|");if(n.length===3){m.userInfo.sessionID=n[0];m.userInfo.sessionPV=Number(n[1]);m.userInfo.sessionBeginTime=Number(n[2]);k=false}}}}}}catch(s){b=true;j.reportError("UserInfoFailed",s)}if(b){m.setFirstVisit()}else{if(k){m.setSessionBegin()}else{m.update()}}},updateCounter:function(c){var b=true,a=this.userInfo;if(a.sessionPV===0){switch(c){case"direct":a.directCount++;break;case"referral":a.referralCount++;break;case"organic search":a.organicCount++;break;case"paid search":break;default:b=false;break}}if(b){a.sessionPV+=1;this.update()}},setFirstVisit:function(){var b=this,c=_gsUtility.getLocalTime(),a=b.userInfo;a.userID=_gsUtility.getRandomID();a.sessionID=_gsUtility.getRandomID();a.sessionBeginTime=c;a.firstVisitTime=c;a.timezone=_gsUtility.getTimezone();a.sessionPV=0;a.directCount=0;a.referralCount=0;a.organicCount=0;a.isFirstVisit=true;b.update()},setSessionBegin:function(){var b=this,c=_gsUtility.getLocalTime(),a=b.userInfo;a.sessionID=_gsUtility.getRandomID();a.sessionPV=0;a.sessionBeginTime=c;b.update()},update:function(){var a=this.getCookieEntities();this.cookieSerializer.save(a)},getUserInfo:function(){return this.userInfo},getCookieEntities:function(){var g=this,e=g.config,b=e.version,c=g.userInfo,f=g.cookieSerializer.getCookieSupportDegree(),d=(f===2?e.sessionTimeout:undefined),h=(f===2?e.globalTimeout:undefined),a=[];if(f>0){a=[{name:"_gscu",value:[b,c.userID,c.firstVisitTime,c.timezone,c.directCount,c.referralCount,c.organicCount].join("|"),expires:h},{name:"_gscs",value:[c.sessionID,c.sessionPV,c.sessionBeginTime].join("|"),expires:d},{name:"_gscbrs",value:1}]}return a},getRawCookieString:function(b){var a=this.getCookieEntities();b=(b!==false);return this.cookieSerializer.getRawCookieString(a,"&",false,b)},isSampled:function(){var a=this.config.samplingRate,b=_gsUtility.getHashCode(this.userInfo.userID);return b%10000<a*100}});GridsumWebDissector.CookieSerializer=function(a){this.config=a;this.serviceID=a?a.serviceID:"";this.cookiePath=a?a.cookiePath:"/";this.domain=a.domain||location.hostname};GridsumWebDissector.extend(GridsumWebDissector.CookieSerializer.prototype,{getCookieSupportDegree:function(){var b=this,a=b.ckSupport,c=[{name:"testsession_aaaa",value:"yes"},{name:"testlong_aaaa",value:"yes",expires:30}];if(!a){b.save(c);b.restore(c);b.delCookie("testsession_aaaa");b.delCookie("testlong_aaaa");if(c[1].value){a=2}else{if(c[0].value){a=1}else{a=0}}b.ckSupport=a}return a},save:function(c){if(!_gsUtility.isArray(c)){c=[c]}for(var b=0;b<c.length;b++){var a=c[b];this.setCookie(a.name,a.value,a.expires,a.path,a.domain,a.secure)}},restore:function(c,b){b=(b!==false);if(!_gsUtility.isArray(c)){c=[c]}for(var a=0;a<c.length;a++){var d=this.getCookie(c[a].name);c[a].value=(b||d)?d:c[a].value}return c},restoreFrom:function(a,k,c,d){var e,g,b,h,j,f=this;d=(d!==false);j=d?f.config.serviceID:undefined;if(!_gsUtility.isArray(k)){k=[k]}for(e=0,g=k.length;e<g;e++){b=f.encodeCookieName(k[e].name,j);h=_gsUtility.find(a,b+"=",c,false);k[e].value=h===null?null:unescape(h)}return k},getRawCookieString:function(j,b,a,e){var c=this.config,h=e?c.serviceID:null;if(!_gsUtility.isArray(j)){j=[j]}var d=[];j=this.restore(j);for(var f=0,g=j.length;f<g;f++){d.push(this.encodeCookieName(j[f].name,h)+"="+escape(j[f].value))}return d.join(b)},toRawCookieString:function(d,f,e){if(!_gsUtility.isArray(d)){d=[d]}var b=[];for(var c=0,a=d.length;c<a;c++){if(e&&!d[c].value){continue}b.push(this.encodeCookieName(d[c].name)+"="+escape(d[c].value))}return b.join(f)},setCookie:function(b,e,a,g,d,f){var c=this.encodeCookieName(b);d=d||this.domain;_gsUtility.setCookie(c,e,a,g,d,f)},getCookie:function(a,c){var b=this.encodeCookieName(a);return _gsUtility.getCookie(b,c)},delCookie:function(a){this.setCookie(a,"0",-1000)},encodeCookieName:function(b,d){var a=this.config,c;if(d){d=this.getCookieSuffix(d)}else{d=this.getCookieSuffix(a.serviceID,a.domain)}return[b,"_",d].join("")},getCookieSuffix:function(){var a=Array.prototype.join.apply(arguments,["_"]);return _gsUtility.getHashCode(a)}});GridsumWebDissector.DataTransmitter=function(a){this.config=a||{}};GridsumWebDissector.extend(GridsumWebDissector.DataTransmitter.prototype,{checkUrl:function(g,h,f){var e,d=this,b=d.config,c=GridsumWebDissector.getTracker(b.serviceID);h=(h!==false);f=f||b.serviceUrl;g.gsrd=_gsUtility.getRandomID();e=_gsUtility.serialize(g,"=","&",true,h);var a=[f,"?",e].join("");return a.length<=2000},send:function(f,e,a){if(!f){return}var g,h=this,c=h.config,i=GridsumWebDissector.getTracker(c.serviceID);e=(e!==false);a=a||c.serviceUrl;f.gsrd=_gsUtility.getRandomID();g=_gsUtility.serialize(f,"=","&",true,e);var b=[a,"?",g].join("");var d=new Image(1,1);d.onerror=function(){i.reportError("DataSendingFailed",{url:b});setTimeout(function(){var j=new Image(1,1);j.onload=function(){i.reportError("ReSendingSuccessfully",{url:b})};j.onerror=function(){return true};j.src=b},2000);return true};d.onload=function(){};d.src=b;h.img=d}});GridsumWebDissector.Config=function(c){var a=this;a.originalUrl=a.ignoreTrafficKeyword=a.pageVersion=a.pageName=null;a.heatmapKeyword="#gwdheatmap&";a.errorUrl="http://www.google-analytics.com/__utm.gif?utmwv=4.3&utmn=1258739316&utmhn=www.gridsum.com&utmhid=1819935857&utmr=-&gsrd={6}&utmp=/WebDissectorErrorInfo/ProfileID:{0}/ErrorCode:{1}/{2}/HostPage:{3}/Referrer:{7}/ScriptVer:{8}/UserAgent:{9}&utmac=UA-1916223-1&utmcc=__utma%3D94480714.{4}.{5}.{5}.{5}.1%3B%2B__utmz%3D94480714.{5}.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B";a.serviceID=c;a.version=GridsumWebDissector.version;a.protocol="http";a.serviceUrl="//www.webdissector.com/recv/gs.gif";a.heatmapUrl="//www.webdissector.com/js/heatmap.js";a.redirectServer="//www.addissector.com/";a.redirectServerPath="/redirect.gif";a.campNameKey="utm_campaign";a.campMediumKey="utm_medium";a.campSourceKey="utm_source";a.campGroupKey="utm_adgroup";a.campTermKey="utm_term";a.campContentKey="utm_content";a.channelKey="utm_channel";a.allowAnchor=false;a.keepAnchor=false;function b(g,i,e,k,d,h,j,f){return new GridsumWebDissector.SearchEngine(g,i,e,k,d,h,j,f)}a.searchEngines=[b("google",/(\w+\.)*google\.(\w+|com\.\w+)/,"q","ie","utf-8","start","num"),b("baidu",/(\w+\.)*baidu\.(com|cn|com\.cn)/,"wd","ie","gb2312","pn","rn"),b("baidu",/(\w+\.)*baidu\.(com|cn|com\.cn)/,"word","ie","gb2312","pn","rn"),b("yahoo",/(\w+\.)*yahoo\.\w+/,"p","ei","utf-8","b"),b("live",/(\w+\.)*live\.\w+/,"q",null,"utf-8","first"),b("youdao.com",/(\w+\.)*youdao\.com/,"q","ue","utf-8","start"),b("soso",/(\w+\.)*soso\.com/,"w",null,"gb2312","pg",null,"page"),b("gougou",/(\w+\.)*gougou\.com/,"search",null,"utf-8","page",null,"page"),b("sogou",/(\w+\.)*sogou\.com/,"query",null,"gb2312","page",null,"page"),b("bing",/\bbing\.(\w+)/,"q",null,"utf-8","first"),b("118114",/\b118114\.cn/,"kw",null,"gb2312","start"),b("aol",".aol.com","q"),b("lycos",".lycos.com","query"),b("ask",".ask.com","q"),b("altavista",".altavista.com","q"),b("netscape",".netscape.com","query"),b("cnn",".cnn.com","query"),b("gigablast",".gigablast.com","q"),b("search",".search.com","q"),b("pchome",".pchome.com","q")];a.contentNetworkKey="content_";a.searchNetworkKey="search_";a.searchNetworks=[b("google",/.*/,"q","ie","utf-8","start","num"),b("baidu",/.*/,"wd","ie","gb2312","pn","rn"),b("baidu",/.*/,"word","ie","gb2312","pn","rn"),b("yahoo",/.*/,"p","ei","utf-8","b"),b("sogou",/.*/,"query",null,"gb2312","page",null,"page"),b("youdao.com",/.*/,"q","ue","utf-8","start")];a.ignoreKeywords=[];a.ignoreSearchEngines=[];a.ignoreRef=[];a.domain=location.hostname;if(a.domain.substring(0,4)=="www."){a.domain=a.domain.substring(4)}a.cookiePath="/";a.cookieSecure=false;a.sessionTimeout=30*60;a.globalTimeout=2*365*24*3600;a.campaignTimeout=6*30*24*3600;a.isCrossDomainEnabled=false;a.samplingRate=100;a.lazyClickTrace=false;a.clickEventGathering=false;a.coordinateElement=document.body;a.mcSamplingRate=100;a.mcWhiteList=[];a.mcBlackList=["body","html"];a.documentWidth=false;a.clickZoneWidth=false;a.clickZoneHeight=false;a.iframes=[];a.snapshotVar="GridsumSnapshotID";a.ignoreParams=["gclid","bdclkid",a.campNameKey,a.campMediumKey,a.campSourceKey,a.campGroupKey,a.campTermKey,a.campContentKey,a.channelKey]};GridsumWebDissector.BehaviorAnalyzer=function(a){var b=this;b.config=a||{};if(a.lazyClickTrace){_gsUtility.observe(window,"load",function(){b.init()})}else{b.init()}};GridsumWebDissector.extend(GridsumWebDissector.BehaviorAnalyzer.prototype,{init:function(){var o,q,c=this,x=c.config,f=x.clickEventGathering,w=x.snapshotVar,a=GridsumWebDissector.getTracker(x.serviceID),m=x.mcSamplingRate,k=x.mcBlackList,h=x.mcWhiteList,y=x.coordinateElement;if(!f||a.isLocal){return}function t(){var i=a.userTracker.isSampled();var e=x.mcSamplingRate;if(!i){return false}else{var A=_gsUtility.getHashCode(a.userTracker.getUserInfo().userID);return A%10000<e*100}}var u,r,n,d;function v(){u=0;r=0;n=_gsUtility.getHScroll();d=_gsUtility.getVScroll();if(x.documentWidth){var i=_gsUtility.getDocWidth();u=(i-x.documentWidth)/2}else{if(y){var e=_gsUtility.getElementPos(y);u=e.x;r=e.y}}}function p(i,e){v();return{x:i+n-u,y:e+d-r}}function b(e,B){if(!t()){return}var i=Number(window[w]||0);if(!(i>-1&&i<256)){i=0}var A=a.getCommon("mc");A.gspver=a.extSrc.pageVer;A.gsmcoffsetx=e;A.gsmcoffsety=B;A.gsmcurl=[a.urlInfo.protocol,"://",a.urlInfo.host,a.urlInfo.path].join("");A.gstl=a.extSrc.pageName||a.browserInfo.title;A.gssn=i;A.gsorurl=a.urlInfo.pureUrl;a.dataSender.send(A)}function g(B,E){var i,C,A,D=E.target;if(!D){return true}i=_gsUtility.getElementPos(B);C=(E.clientX||E.pageX);A=(E.clientY||E.pageY);v();C+=i.x-u;A+=i.y-r;C=Math.round(C/10)*10;A=Math.round(A/10)*10;b(C,A)}_gsUtility.observe(document,"mouseup",function(D){var C,H,F,B,E=D.target;if(!E){return}B=E.tagName;var K="#"+E.id.toUpperCase();for(C=0;C<k.length;C++){var I=k[C].toUpperCase();if(I===K||I===B){return}}var A=true;if(h.length!==0){A=false;for(C=0;C<h.length;C++){var J=h[C].toUpperCase();if(J===K||J===B){A=true;break}}}if(A){H=D.clientX||D.pageX;F=D.clientY||D.pageY;var G=p(H,F);H=Math.round(G.x/10)*10;F=Math.round(G.y/10)*10;if(x.clickZoneWidth&&(H<0||H>x.clickZoneWidth)){return}if(x.clickZoneHeight&&(F<0||F>x.clickZoneHeight)){return}b(H,F)}});if(x.iframes.length===0){for(o=0,q=frames.length;o<q;o++){try{var l=frames[o].frameElement||frames[o];if(l.contentDocument){x.iframes.push(l)}}catch(s){}}}for(o=0,q=x.iframes.length;o<q;o++){var j=_gsUtility.getEl(x.iframes[o]);if(j){try{j=j.frameElement||j;var z=j.contentDocument;_gsUtility.observe(z,"mouseup",(function(e){return function(i){g(e,i)}})(j))}catch(s){}}}}});GridsumWebDissector.ECommerce=function(a){if(a){this.config=a}this.orders=[]};GridsumWebDissector.extend(GridsumWebDissector.ECommerce.prototype,{addOrder:function(d,a,b){var c=!_gsUtility.isNumber(a);a=c?0:Number(a);this.orders.push({gsorderid:d.toString(),gstotal:a,gsquan:0,gsuserid:b,gsproducts:[],recal:c})},addProduct:function(f,k,h,g,b,a){var j,l,d,e=this.orders,m={};f=f.toString();g=_gsUtility.isNumber(g)?Number(g):0;b=_gsUtility.isNumber(b)?Number(b):0;for(var c=0;c<e.length;c++){if(e[c].gsorderid===f){j=e[c];break}}if(!j){j={gsorderid:f,gstotal:0,gsquan:0,gsproducts:[],recal:true};this.orders.push(j)}l=j.recal;d=Number((g*b).toFixed(2));m={orderid:f,name:k,sku:h,quantity:b,unitprice:g,price:d,category:a};j.gsquan+=m.quantity;j.gsproducts.push(m);if(l){j.gstotal+=d}},getOrders:function(){return this.orders},clearOrders:function(){this.orders=[]}});